<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Welcome to Photoshare REST Api’s documentation! &#8212; Photoshare REST Api 0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="./_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="./_static/classic.css" />
    
    <script src="./_static/documentation_options.js"></script>
    <script src="./_static/doctools.js"></script>
    <script src="./_static/sphinx_highlight.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">Photoshare REST Api 0.0.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Welcome to Photoshare REST Api’s documentation!</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="welcome-to-photoshare-rest-api-s-documentation">
<h1>Welcome to Photoshare REST Api’s documentation!<a class="headerlink" href="#welcome-to-photoshare-rest-api-s-documentation" title="Link to this heading">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
</section>
<section id="module-main">
<span id="rest-api-main"></span><h1>REST API main<a class="headerlink" href="#module-main" title="Link to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="main.healthchecker">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">healthchecker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#main.healthchecker" title="Link to this definition">¶</a></dt>
<dd><p>The healthchecker function is used to check the health of the database.
It will return a message if it can connect to the database, and an error otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>db</strong> – Session: Pass the database session to the function</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary with a message</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.read_items">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">read_items</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#main.read_items" title="Link to this definition">¶</a></dt>
<dd><p>The read_items function returns a list of items.</p>
<blockquote>
<div><p>—
get:</p>
<blockquote>
<div><p>description: Get all items in the system.  This is a very long description that will be displayed on multiple lines.  It should wrap at some point, but I’m not sure how to make it do so automatically without using &amp;lt;br&amp;gt; tags or something like that…I guess we’ll see what happens!
responses:</p>
<blockquote>
<div><p>200: # HTTP status code 200 means &amp;quot;OK&amp;quot; (i.e., no error) and is the default response for GET requests if you don’t specify anything else here…</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>token</strong> – Annotated[str: Tell fastapi that the token is a string, and it should be validated using the oauth2_scheme</p></li>
<li><p><strong>Depends</strong><strong>(</strong><strong>oauth2_scheme</strong><strong>)</strong><strong>]</strong> – Tell fastapi that the token parameter is dependent on the oauth2_scheme</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary of the form:</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="main.read_root">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">main.</span></span><span class="sig-name descname"><span class="pre">read_root</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#main.read_root" title="Link to this definition">¶</a></dt>
<dd><dl>
<dt>The read_root function returns a JSON object with the message &amp;quot;Welcome to Photoshare&amp;quot;</dt><dd><p>—
tags: [root]
responses:</p>
<blockquote>
<div><dl class="simple">
<dt>200: </dt><dd><p>description: A welcome message from Photoshare.</p>
</dd>
</dl>
</div></blockquote>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A dictionary with a key &amp;quot;message&amp;quot; and value &amp;quot;welcome to photoshare&amp;quot;</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-src.repository.comments">
<span id="rest-api-repository-comments"></span><h1>REST API repository Comments<a class="headerlink" href="#module-src.repository.comments" title="Link to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="src.repository.comments.create_comment">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.repository.comments.</span></span><span class="sig-name descname"><span class="pre">create_comment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">photos_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CommentBase</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Comment</span></span></span><a class="headerlink" href="#src.repository.comments.create_comment" title="Link to this definition">¶</a></dt>
<dd><dl>
<dt>The create_comment function creates a new comment in the database.</dt><dd><dl>
<dt>Args:</dt><dd><p>post_id (int): The id of the post to which this comment belongs.
body (CommentBase): A CommentBase object containing information about the new comment.</p>
<blockquote>
<div><p>This includes its text and user_id, but not its id or date created/updated fields,
as these are generated by SQLAlchemy when it is added to the database.</p>
</div></blockquote>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>photos_id</strong> – int: Identify the photos that the comment is being added to</p></li>
<li><p><strong>body</strong> – CommentBase: Specify the type of data that is expected to be passed in</p></li>
<li><p><strong>db</strong> – Session: Access the database</p></li>
<li><p><strong>user</strong> – User: Get the user_id from the logged in user</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A comment object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.repository.comments.delete_comment">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.repository.comments.</span></span><span class="sig-name descname"><span class="pre">delete_comment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comment_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#src.repository.comments.delete_comment" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>The delete_comment function deletes a comment from the database.</dt><dd><dl class="simple">
<dt>Args:</dt><dd><p>comment_id (int): The id of the comment to be deleted.
db (Session): A connection to the database.
user (User): The user who is deleting this post.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>comment_id</strong> – int: Identify the comment to be deleted</p></li>
<li><p><strong>db</strong> – Session: Connect to the database</p></li>
<li><p><strong>user</strong> – User: Check if the user is authorized to delete a comment</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The comment that was deleted</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.repository.comments.edit_comment">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.repository.comments.</span></span><span class="sig-name descname"><span class="pre">edit_comment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comment_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CommentBase</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Comment</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#src.repository.comments.edit_comment" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>The edit_comment function allows a user to edit their own comment.</dt><dd><dl class="simple">
<dt>Args:</dt><dd><p>comment_id (int): The id of the comment that is being edited.
body (CommentBase): The new text for the comment.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>comment_id</strong> – int: Find the comment in the database</p></li>
<li><p><strong>body</strong> – CommentBase: Pass the data from the request body to this function</p></li>
<li><p><strong>db</strong> – Session: Connect to the database</p></li>
<li><p><strong>user</strong> – User: Check if the user is an admin, moderator or the author of the comment</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A comment object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.repository.comments.show_single_comment">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.repository.comments.</span></span><span class="sig-name descname"><span class="pre">show_single_comment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comment_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Comment</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#src.repository.comments.show_single_comment" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>The show_single_comment function returns a single comment from the database.</dt><dd><dl class="simple">
<dt>Args:</dt><dd><p>comment_id (int): The id of the comment to be returned.
db (Session): A connection to the database.  This is provided by FastAPI when it calls this function, so you don’t need to worry about it!
user (User): The currently logged in user, as determined by FastAPI’s authentication system.  Again, this is provided for you automatically and does not need to be passed in explicitly!</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>comment_id</strong> – int: Specify the id of the comment that we want to retrieve</p></li>
<li><p><strong>db</strong> – Session: Access the database</p></li>
<li><p><strong>user</strong> – User: Check if the user is authorized to see the comment</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The comment with the given id, if it exists</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.repository.comments.show_user_comments">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.repository.comments.</span></span><span class="sig-name descname"><span class="pre">show_user_comments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Comment</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#src.repository.comments.show_user_comments" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>The show_user_comments function returns a list of comments made by the user with the given id.</dt><dd><p>If no such user exists, it returns None.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user_id</strong> – int: Specify the user_id of the user whose comments we want to retrieve</p></li>
<li><p><strong>db</strong> – Session: Pass the database session to the function</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of comments</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.repository.comments.show_user_comments_photo">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.repository.comments.</span></span><span class="sig-name descname"><span class="pre">show_user_comments_photo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">photos_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Comment</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#src.repository.comments.show_user_comments_photo" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>The <cite>show_user_post_comments</cite> function returns a list of comments for a given user and post.</dt><dd><dl class="simple">
<dt>Args:</dt><dd><p><cite>user_id</cite> (int): The id of the user whose comments are being retrieved.
<cite>post_id</cite> (int): The id of the post whose comments are being retrieved.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>photos_id</strong> – int: Filter the comments by <cite>photos_id</cite></p></li>
<li><p><strong>user_id</strong> – int: Filter the comments by <cite>user_id</cite></p></li>
<li><p><strong>db</strong> – Session: Pass the database session to the function</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of comments, or none if the user doesn’t exist</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-src.repository.photos">
<span id="rest-api-repository-photos"></span><h1>REST API repository Photos<a class="headerlink" href="#module-src.repository.photos" title="Link to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="src.repository.photos.create_user_photo">
<span class="sig-prename descclassname"><span class="pre">src.repository.photos.</span></span><span class="sig-name descname"><span class="pre">create_user_photo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">photo</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PhotoCreate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UploadFile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">PhotoResponse</span></span></span><a class="headerlink" href="#src.repository.photos.create_user_photo" title="Link to this definition">¶</a></dt>
<dd><p>The create_user_photo function creates a new photo for the current user.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>photo</strong> – PhotoCreate: Create a new photo object</p></li>
<li><p><strong>image</strong> – UploadFile: Pass the image file to the function</p></li>
<li><p><strong>current_user</strong> – User: Get the user id of the current user</p></li>
<li><p><strong>db</strong> – Session: Access the database</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A photoresponse object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.repository.photos.delete_user_photo">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.repository.photos.</span></span><span class="sig-name descname"><span class="pre">delete_user_photo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">photo_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_admin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.repository.photos.delete_user_photo" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>The delete_user_photo function deletes a photo from the database and Cloudinary.</dt><dd><dl class="simple">
<dt>Args:</dt><dd><p>photo_id (int): The id of the photo to be deleted.
user_id (int): The id of the user who is deleting this photo.
is_admin (bool): Whether or not this user has admin privileges.</p>
</dd>
<dt>Returns: </dt><dd><p>Photo object if successful, None otherwise.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>photo_id</strong> – int: Specify the id of the photo to be deleted</p></li>
<li><p><strong>user_id</strong> – int: Check if the user is authorized to delete the photo</p></li>
<li><p><strong>is_admin</strong> – bool: Check if the user is an admin or not</p></li>
<li><p><strong>db</strong> – Session: Pass the database session to the function</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The deleted photo</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.repository.photos.get_public_id_from_image_url">
<span class="sig-prename descclassname"><span class="pre">src.repository.photos.</span></span><span class="sig-name descname"><span class="pre">get_public_id_from_image_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#src.repository.photos.get_public_id_from_image_url" title="Link to this definition">¶</a></dt>
<dd><p>The get_public_id_from_image_url function takes a Cloudinary image URL as input and returns the public ID of the image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>image_url</strong> – str: Pass in the image url as a string</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The public id of an image</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.repository.photos.get_user_photo_by_id">
<span class="sig-prename descclassname"><span class="pre">src.repository.photos.</span></span><span class="sig-name descname"><span class="pre">get_user_photo_by_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">photo_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Photo</span></span></span><a class="headerlink" href="#src.repository.photos.get_user_photo_by_id" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>The get_user_photo_by_id function returns a photo object from the database based on its id.</dt><dd><dl class="simple">
<dt>Args:</dt><dd><p>photo_id (int): The id of the photo to be returned.
db (Session): A session object for interacting with the database.</p>
</dd>
<dt>Returns:</dt><dd><p>Photo: A single Photo object from the database.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>photo_id</strong> – int: Identify the photo in the database</p></li>
<li><p><strong>db</strong> – Session: Pass the database session to the function</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A photo object, which is a row from the database</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.repository.photos.get_user_photos">
<span class="sig-prename descclassname"><span class="pre">src.repository.photos.</span></span><span class="sig-name descname"><span class="pre">get_user_photos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">PhotoListResponse</span></span></span><a class="headerlink" href="#src.repository.photos.get_user_photos" title="Link to this definition">¶</a></dt>
<dd><p>The get_user_photos function returns a list of photos for the specified user.
If no user_id is provided, all photos are returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user_id</strong> – int: Filter the photos by user_id</p></li>
<li><p><strong>skip</strong> – int: Skip the first n photos</p></li>
<li><p><strong>limit</strong> – int: Limit the number of photos returned</p></li>
<li><p><strong>db</strong> – Session: Pass the database session to the function</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of photoresponse objects</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.repository.photos.init_cloudinary">
<span class="sig-prename descclassname"><span class="pre">src.repository.photos.</span></span><span class="sig-name descname"><span class="pre">init_cloudinary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.repository.photos.init_cloudinary" title="Link to this definition">¶</a></dt>
<dd><p>The init_cloudinary function initializes the cloudinary library with the settings from our Django project’s settings.py file.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A dictionary of the cloudinary configuration</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.repository.photos.update_user_photo">
<span class="sig-prename descclassname"><span class="pre">src.repository.photos.</span></span><span class="sig-name descname"><span class="pre">update_user_photo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">photo</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Photo</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">updated_photo</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PhotoUpdate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">PhotoResponse</span></span></span><a class="headerlink" href="#src.repository.photos.update_user_photo" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>The update_user_photo function updates a photo in the database.</dt><dd><dl class="simple">
<dt>Args:</dt><dd><p>photo (Photo): The Photo object to be updated.
updated_photo (PhotoUpdate): The new data for the Photo object.
current_user (User): The user who is making this request, used to check permissions and ownership of the resource being modified.
db (Session): A connection to our database, used for querying and updating records in our tables.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>photo</strong> – Photo: Get the photo object from the database</p></li>
<li><p><strong>updated_photo</strong> – PhotoUpdate: Update the photo</p></li>
<li><p><strong>current_user</strong> – User: Get the user id of the current user</p></li>
<li><p><strong>db</strong> – Session: Access the database</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A photoresponse object</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-src.repository.tags">
<span id="rest-api-repository-tags"></span><h1>REST API repository Tags<a class="headerlink" href="#module-src.repository.tags" title="Link to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="src.repository.tags.create_tag">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.repository.tags.</span></span><span class="sig-name descname"><span class="pre">create_tag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TagBase</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tag</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#src.repository.tags.create_tag" title="Link to this definition">¶</a></dt>
<dd><p>The create_tag function creates a new tag in the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>body</strong> – HashtagBase: Get the title of the hashtag from the request body</p></li>
<li><p><strong>user</strong> – User: Get the user id of the current user</p></li>
<li><p><strong>db</strong> – Session: Access the database</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A hashtag object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.repository.tags.get_all_tags">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.repository.tags.</span></span><span class="sig-name descname"><span class="pre">get_all_tags</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">skip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tag</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.repository.tags.get_all_tags" title="Link to this definition">¶</a></dt>
<dd><p>The get_all_tags function returns a list of all the tags in the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>skip</strong> – int: Skip the first n tags</p></li>
<li><p><strong>limit</strong> – int: Limit the number of rows returned by the query</p></li>
<li><p><strong>db</strong> – Session: Pass in the database session</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of hashtag objects</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.repository.tags.get_my_tags">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.repository.tags.</span></span><span class="sig-name descname"><span class="pre">get_my_tags</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">skip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tag</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#src.repository.tags.get_my_tags" title="Link to this definition">¶</a></dt>
<dd><p>The get_my_tags function returns a list of Hashtag objects that are associated with the user.
The skip and limit parameters allow for pagination.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>skip</strong> – int: Skip the first n tags in the database</p></li>
<li><p><strong>limit</strong> – int: Limit the number of results returned</p></li>
<li><p><strong>user</strong> – User: Get the user_id of the current user</p></li>
<li><p><strong>db</strong> – Session: Access the database</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of hashtags that belong to the user</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.repository.tags.get_tag_by_id">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.repository.tags.</span></span><span class="sig-name descname"><span class="pre">get_tag_by_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tag</span></span></span><a class="headerlink" href="#src.repository.tags.get_tag_by_id" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>The get_tag_by_id function returns a Hashtag object from the database based on its id.</dt><dd><dl class="simple">
<dt>Args:</dt><dd><p>tag_id (int): The id of the Hashtag to be returned.
db (Session): A Session instance for interacting with the database.</p>
</dd>
<dt>Returns:</dt><dd><p>A single Hashtag object matching the given tag_id.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag_id</strong> – int: Specify the id of the tag we want to retrieve</p></li>
<li><p><strong>db</strong> – Session: Pass the database session to the function</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A hashtag object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.repository.tags.remove_tag">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.repository.tags.</span></span><span class="sig-name descname"><span class="pre">remove_tag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tag</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#src.repository.tags.remove_tag" title="Link to this definition">¶</a></dt>
<dd><p>The remove_tag function removes a tag from the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag_id</strong> – int: Specify the id of the tag to be removed</p></li>
<li><p><strong>db</strong> – Session: Pass the database session to the function</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A hashtag object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.repository.tags.update_tag">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.repository.tags.</span></span><span class="sig-name descname"><span class="pre">update_tag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TagBase</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tag</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#src.repository.tags.update_tag" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>The update_tag function updates a tag in the database.</dt><dd><dl class="simple">
<dt>Args:</dt><dd><p>tag_id (int): The id of the tag to update.
body (HashtagBase): The new values for the updated tag.
db (Session): A connection to our database session, used for querying and committing changes.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag_id</strong> – int: Identify the tag to be updated</p></li>
<li><p><strong>body</strong> – HashtagBase: Pass in the new title for the tag</p></li>
<li><p><strong>db</strong> – Session: Pass the database session to the function</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A hashtag</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-src.repository.users">
<span id="rest-api-repository-users"></span><h1>REST API repository Users<a class="headerlink" href="#module-src.repository.users" title="Link to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="src.repository.users.create_user">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.repository.users.</span></span><span class="sig-name descname"><span class="pre">create_user</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UserModel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.repository.users.create_user" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>The create_user function creates a new user in the database.</dt><dd><dl class="simple">
<dt>Args:</dt><dd><p>user (UserModel): The UserModel object to be created.
db (Session): The SQLAlchemy Session object used for querying the database.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user</strong> – UserModel: Pass in the user object that is created when a new user registers</p></li>
<li><p><strong>db</strong> – Session: Create a database session</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The newly created user object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.repository.users.get_user_by_email">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.repository.users.</span></span><span class="sig-name descname"><span class="pre">get_user_by_email</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">email</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">User</span></span></span><a class="headerlink" href="#src.repository.users.get_user_by_email" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>The get_user_by_email function takes in an email and a database session, then returns the user with that email.</dt><dd><dl class="simple">
<dt>Args:</dt><dd><p>email (str): The user’s unique identifier.
db (Session): A database session object to query from.</p>
</dd>
<dt>Returns: </dt><dd><p>User: The user with the given id.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>email</strong> – str: Specify the email address of the user that we want to retrieve from our database</p></li>
<li><p><strong>db</strong> – Session: Pass in the database session to the function</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The user object that matches the email address passed in</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.repository.users.get_user_by_id">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.repository.users.</span></span><span class="sig-name descname"><span class="pre">get_user_by_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">User</span></span></span><a class="headerlink" href="#src.repository.users.get_user_by_id" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>The get_user_by_id function returns a user object from the database based on the user’s id.</dt><dd><dl class="simple">
<dt>Args:</dt><dd><p>user_id (int): The id of the desired User object.
db (Session): A Session instance to query against.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user_id</strong> – int: Specify the user id of the user we want to get</p></li>
<li><p><strong>db</strong> – Session: Pass in the database session to the function</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A user object which has the following fields</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-src.routes.auth">
<span id="rest-api-routes-auth"></span><h1>REST API routes Auth<a class="headerlink" href="#module-src.routes.auth" title="Link to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="src.routes.auth.login">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.auth.</span></span><span class="sig-name descname"><span class="pre">login</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OAuth2PasswordRequestForm</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(OAuth2PasswordRequestForm)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.auth.login" title="Link to this definition">¶</a></dt>
<dd><p><a href="#id1"><span class="problematic" id="id2">**</span></a>The login function is used to authenticate a user.**🚂</p>
<p>___</p>
<ul class="simple">
<li><p><a href="#id3"><span class="problematic" id="id4">**</span></a>:param**⚡ <cite>body:</cite> OAuth2PasswordRequestForm: Receive the data from the request body</p></li>
<li><p><a href="#id5"><span class="problematic" id="id6">**</span></a>:param**⚡ <cite>db:</cite> <cite>Session:</cite> Pass the database connection to the function</p></li>
</ul>
<p><strong>:return:</strong> An object of the loginresponse class, which contains a jwt token</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.routes.auth.signup">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.auth.</span></span><span class="sig-name descname"><span class="pre">signup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UserModel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.auth.signup" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt><strong>The signup function creates a new user in the database.</strong></dt><dd><p><strong>It takes an email and password as input, and returns a `UserResponse` object with the newly created user’s information.</strong>
<strong>If there is already an account associated with that email address, it will return a `409 Conflict error`.🔮</strong></p>
</dd>
</dl>
<p>___</p>
<ul class="simple">
<li><p><strong>:param</strong> 🧹 <cite>body:</cite> <cite>UserModel:</cite> Get the user model from the request body</p></li>
<li><p><strong>:param</strong> 🧹 <cite>db:</cite> <cite>Session:</cite> Connect to the database</p></li>
</ul>
<p><strong>:return:</strong> An object of type userresponse</p>
</dd></dl>

</section>
<section id="module-src.routes.comments">
<span id="rest-api-routes-comments"></span><h1>REST API routes Comments<a class="headerlink" href="#module-src.routes.comments" title="Link to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="src.routes.comments.by_user_comments">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.comments.</span></span><span class="sig-name descname"><span class="pre">by_user_comments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.comments.by_user_comments" title="Link to this definition">¶</a></dt>
<dd><p>The <cite>by_user_comments function</cite> returns all comments made by a user.</p>
<p><strong>Args:</strong></p>
<p><cite>user_id</cite> (_int_): The id of the user whose comments are to be returned.</p>
<p><cite>db</cite> (_Session_, optional): SQLAlchemy Session. Defaults to Depends(<cite>get_db</cite>).</p>
<p><cite>current_user</cite> (_User_, optional): User object for the currently logged in user. Defaults to Depends(<cite>auth_service.get_current_user</cite>).</p>
<p><strong>Returns:</strong></p>
<p>_List[Comment]_: A list of Comment objects representing all comments made by a given user.🦉</p>
<p>___</p>
<ul class="simple">
<li><p><a href="#id7"><span class="problematic" id="id8">**</span></a>:param**🖋️ <cite>user_id</cite>: _int_: Specify the <cite>user_id</cite> of the user whose comments we want to see</p></li>
<li><p><a href="#id9"><span class="problematic" id="id10">**</span></a>:param**🖋️ <cite>db</cite>: _Session_: Pass the database session to the function</p></li>
<li><p><a href="#id11"><span class="problematic" id="id12">**</span></a>:param**🖋️ <cite>current_user</cite>: _User_: Check if the user is logged in</p></li>
</ul>
<p><strong>:return:</strong> A list of comments</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.routes.comments.by_user_photo_comments">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.comments.</span></span><span class="sig-name descname"><span class="pre">by_user_photo_comments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">photos_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.comments.by_user_photo_comments" title="Link to this definition">¶</a></dt>
<dd><p>The <cite>by_user_photo_comments function</cite> returns all comments for a given user and photo.</p>
<p><strong>Args:</strong></p>
<p><cite>user_id</cite> (_int_): The id of the user whose comments are being retrieved.</p>
<p><cite>post_id</cite> (_int_): The id of the post whose comments are being retrieved.</p>
<p><strong>Returns:</strong></p>
<p>A list containing all comment objects associated with a given user and photo.🐈‍⬛</p>
<p>___</p>
<ul class="simple">
<li><p><a href="#id13"><span class="problematic" id="id14">**</span></a>:param**🗝️ <cite>user_id</cite>: _int_: Specify the <cite>user_id</cite> of the user whose comments we want to retrieve</p></li>
<li><p><a href="#id15"><span class="problematic" id="id16">**</span></a>:param**🗝️ <cite>photos_id</cite>: _int_: Get the comments for a specific photo</p></li>
<li><p><a href="#id17"><span class="problematic" id="id18">**</span></a>:param**🗝️ <cite>db</cite>: _Session_: Access the database</p></li>
<li><p><a href="#id19"><span class="problematic" id="id20">**</span></a>:param**🗝️ <cite>current_user</cite>: _User_: Get the current user who is logged in</p></li>
</ul>
<p><strong>:return:</strong> A list of comments that belong to a photo</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.routes.comments.create_comment">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.comments.</span></span><span class="sig-name descname"><span class="pre">create_comment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">photos_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CommentBase</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_current_user)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.comments.create_comment" title="Link to this definition">¶</a></dt>
<dd><p>The <cite>create_comment function</cite> creates a new comment for the photo with the given id.</p>
<p><strong>The body of the comment is passed in as JSON data, and must contain a `body` field.
The user who created this comment will be set to `current_user`.📖</strong>
___</p>
<ul class="simple">
<li><p><a href="#id21"><span class="problematic" id="id22">**</span></a>:param**🪄 <cite>photos_id</cite>: _int_: Specify the post that the comment is being created for</p></li>
<li><p><a href="#id23"><span class="problematic" id="id24">**</span></a>:param**🪄 <cite>body</cite>: _CommentBase_: Pass the data from the request body to the function</p></li>
<li><p><a href="#id25"><span class="problematic" id="id26">**</span></a>:param**🪄 <cite>db</cite>: _Session_: Pass the database session to the repository layer</p></li>
<li><p><a href="#id27"><span class="problematic" id="id28">**</span></a>:param**🪄 <cite>current_user</cite>: _User_: Get the current user</p></li>
</ul>
<p><strong>:return:</strong> A comment object, which is then serialized as json</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.routes.comments.delete_comment">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.comments.</span></span><span class="sig-name descname"><span class="pre">delete_comment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comment_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_current_user)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.comments.delete_comment" title="Link to this definition">¶</a></dt>
<dd><p>The <cite>delete_comment function</cite> deletes a comment from the database.</p>
<p><strong>The function takes in an integer representing the id of the comment to be deleted,
and returns a dictionary containing information about that comment. 🪶</strong></p>
<p>___</p>
<ul class="simple">
<li><p><a href="#id29"><span class="problematic" id="id30">**</span></a>:param**⚡ <cite>comment_id</cite>: _int_: Specify the comment that is to be deleted</p></li>
<li><p><a href="#id31"><span class="problematic" id="id32">**</span></a>:param**⚡ <cite>db</cite>: _Session_: Get the database session from the dependency</p></li>
<li><p><a href="#id33"><span class="problematic" id="id34">**</span></a>:param**⚡ <cite>current_user</cite>: _User_: Check if the user is logged in</p></li>
</ul>
<p><strong>:return:</strong> The deleted comment</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.routes.comments.edit_comment">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.comments.</span></span><span class="sig-name descname"><span class="pre">edit_comment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comment_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CommentBase</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_current_user)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.comments.edit_comment" title="Link to this definition">¶</a></dt>
<dd><p>The <cite>edit_comment function</cite> allows a user to edit their own comment.</p>
<p><strong>The function takes in the `comment_id`, body and db as parameters.
It then calls the edit_comment function from `repository_comments` which returns an edited comment object if successful or `None` otherwise.
If it is unsuccessful, it raises a 404 error with detail message `COMM_NOT_FOUND`.🐍</strong></p>
<p>___</p>
<ul class="simple">
<li><p><a href="#id35"><span class="problematic" id="id36">**</span></a>:param**𓆙 <cite>comment_id</cite>: _int_: Identify the comment to be edited</p></li>
<li><p><a href="#id37"><span class="problematic" id="id38">**</span></a>:param**𓆙 <cite>body</cite>: _CommentBase_: Pass the comment body to the edit_comment function</p></li>
<li><p><a href="#id39"><span class="problematic" id="id40">**</span></a>:param**𓆙 <cite>db</cite>: _Session_: Get the database session</p></li>
<li><p><a href="#id41"><span class="problematic" id="id42">**</span></a>:param**𓆙 <cite>current_user</cite>: _User_: Get the user who is currently logged in</p></li>
</ul>
<p><strong>:return:</strong> None, but the function expects a CommentBase object</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.routes.comments.single_comment">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.comments.</span></span><span class="sig-name descname"><span class="pre">single_comment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comment_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_current_user)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.comments.single_comment" title="Link to this definition">¶</a></dt>
<dd><p>The <cite>single_comment function</cite> returns a single comment from the database.</p>
<p><a href="#id43"><span class="problematic" id="id44">**</span></a>The function takes in an integer representing the id of the comment to be returned,
and two optional parameters: <cite>db</cite> and <cite>current_user</cite>. If no db is provided, it will use
<cite>get_db()</cite> to create a new connection with our database. If no current user is provided,
it will use auth_service’s <cite>get_current_user()</cite> function to retrieve one.🔥</p>
<p>___</p>
<ul class="simple">
<li><p><a href="#id45"><span class="problematic" id="id46">**</span></a>:param**🪶 <cite>comment_id</cite>: _int_: Pass the comment id to the function</p></li>
<li><p><a href="#id47"><span class="problematic" id="id48">**</span></a>:param**🪶 <cite>db</cite>: _Session_: Pass the database session to the function</p></li>
<li><p><a href="#id49"><span class="problematic" id="id50">**</span></a>:param**🪶 <cite>current_user</cite>: _User_: Get the current user from the database</p></li>
</ul>
<p><strong>:return:</strong> The comment object, but i want to return the comment_id</p>
</dd></dl>

</section>
<section id="module-src.routes.photos">
<span id="rest-api-routes-photos"></span><h1>REST API routes Photos<a class="headerlink" href="#module-src.routes.photos" title="Link to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="src.routes.photos.create_link_for_image_transformation">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.photos.</span></span><span class="sig-name descname"><span class="pre">create_link_for_image_transformation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">photo_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_current_user)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.photos.create_link_for_image_transformation" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt><strong>The `create_link_for_image_transformation` function creates a link for the image transformation.</strong></dt><dd><p><strong>The function takes in an integer `photo_id`, which is the id of the photo to be transformed.</strong>
<strong>It also takes in a `current_user` object and db Session object as dependencies.</strong> 
<strong>The `create_link_for_image_transformation` function calls another async function called create link transform image, which returns either None or a string containing the url of where to find the transformed image.🏰</strong></p>
</dd>
</dl>
<hr class="docutils" />
<ul class="simple">
<li><p><a href="#id51"><span class="problematic" id="id52">**</span></a>:param**🪄 <cite>photo_id:</cite> <cite>int:</cite> Get the photo id from the url</p></li>
<li><p><a href="#id53"><span class="problematic" id="id54">**</span></a>:param**🪄 <cite>current_user:</cite> <cite>User:</cite> Get the current user from the database</p></li>
<li><p><a href="#id55"><span class="problematic" id="id56">**</span></a>:param**🪄 <cite>db:</cite> <cite>Session:</cite> Access the database</p></li>
<li><p><a href="#id57"><span class="problematic" id="id58">**</span></a>:param**🪄 : Get the photo id from the request</p></li>
</ul>
<p><a href="#id59"><span class="problematic" id="id60">**</span></a>:return:<a href="#id61"><span class="problematic" id="id62">**</span></a>🪄 A dict with the following keys:</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.routes.photos.create_user_photo">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.photos.</span></span><span class="sig-name descname"><span class="pre">create_user_photo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UploadFile</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">File(PydanticUndefined)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Form(PydanticUndefined)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Form([])</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_current_user)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.photos.create_user_photo" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt><strong>The `create_user_photo` function creates a new photo for the current user.</strong></dt><dd><p><strong>The function takes in an image file, description and tags as parameters.</strong>
<strong>It then uses the `repository_photos` module to create a new photo object with these parameters and store it in the database.🌕</strong></p>
</dd>
</dl>
<hr class="docutils" />
<ul class="simple">
<li><p><a href="#id63"><span class="problematic" id="id64">**</span></a>:param**🗞 <cite>image:</cite> <cite>UploadFile:</cite> Get the image file from the request</p></li>
<li><p><a href="#id65"><span class="problematic" id="id66">**</span></a>:param**🗞 <cite>description:</cite> <cite>str:</cite> Get the description of the photo from the request body</p></li>
<li><p><a href="#id67"><span class="problematic" id="id68">**</span></a>:param**🗞 <cite>tags:</cite> <cite>List[str]:</cite> Get the list of tags from the request body</p></li>
<li><p><a href="#id69"><span class="problematic" id="id70">**</span></a>:param**🗞 <cite>current_user:</cite> <cite>User:</cite> Get the user that is currently logged in</p></li>
<li><p><a href="#id71"><span class="problematic" id="id72">**</span></a>:param**🗞 <cite>db:</cite> <cite>Session:</cite> Pass the database session to the repository layer</p></li>
<li><p><a href="#id73"><span class="problematic" id="id74">**</span></a>:param**🗞 : Get the current user from the database</p></li>
</ul>
<p><strong>:return:</strong> A photo object</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.routes.photos.delete_user_photo">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.photos.</span></span><span class="sig-name descname"><span class="pre">delete_user_photo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">photo_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_current_user)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.photos.delete_user_photo" title="Link to this definition">¶</a></dt>
<dd><p><strong>Delete a user’s photo with access control for administrators and owners🧙🏻‍♂️</strong></p>
<hr class="docutils" />
<ul class="simple">
<li><p><strong>:param**🧹 `photo_id`: int: ID of the photo to delete.</strong></p></li>
<li><p><strong>:param**🧹 `current_user`: User: The currently authenticated user.</strong></p></li>
<li><p><strong>:param**🧹 `db`: Session: The database session.</strong></p></li>
</ul>
<p><strong>:return:</strong> PhotoResponse: The deleted photo response.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.routes.photos.get_user_photo_by_id">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.photos.</span></span><span class="sig-name descname"><span class="pre">get_user_photo_by_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">photo_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_current_user)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.photos.get_user_photo_by_id" title="Link to this definition">¶</a></dt>
<dd><p><strong>Get a user photo by ID🪶</strong></p>
<hr class="docutils" />
<ul class="simple">
<li><p><a href="#id75"><span class="problematic" id="id76">**</span></a>:param**🧹 <cite>photo_id</cite>: int: ID of the photo to retrieve.</p></li>
<li><p><a href="#id77"><span class="problematic" id="id78">**</span></a>:param**🧹 <cite>current_user</cite>: User: The currently authenticated user.</p></li>
<li><p><a href="#id79"><span class="problematic" id="id80">**</span></a>:param**🧹 <cite>db</cite>: Session: The database session.</p></li>
</ul>
<p><strong>:return:</strong> PhotoResponse: The requested photo response.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.routes.photos.get_user_photos">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.photos.</span></span><span class="sig-name descname"><span class="pre">get_user_photos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">skip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_current_user)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.photos.get_user_photos" title="Link to this definition">¶</a></dt>
<dd><p><strong>Get a list of user photos with optional filtering and pagination🔮</strong></p>
<ul class="simple">
<li><p><a href="#id81"><span class="problematic" id="id82">**</span></a>:param**⚡ <cite>skip</cite>: int: Number of photos to skip.</p></li>
<li><p><a href="#id83"><span class="problematic" id="id84">**</span></a>:param**⚡ <cite>limit</cite>: int: Maximum number of photos to return.</p></li>
<li><p><a href="#id85"><span class="problematic" id="id86">**</span></a>:param**⚡ <cite>db</cite>: Session: The database session.</p></li>
<li><p><a href="#id87"><span class="problematic" id="id88">**</span></a>:param**⚡ <cite>current_user</cite>: User: The currently authenticated user.</p></li>
</ul>
<p><strong>:return:</strong> PhotoListResponse: List of photo responses.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.routes.photos.photo_transformation">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.photos.</span></span><span class="sig-name descname"><span class="pre">photo_transformation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">photo_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TransformBodyModel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_current_user)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.photos.photo_transformation" title="Link to this definition">¶</a></dt>
<dd><p><strong>The photo_transformation function is used to transform the image.🦌</strong></p>
<blockquote>
<div><p>The transformation can be:</p>
<blockquote>
<div><ul class="simple">
<li><p>rotate</p></li>
<li><p>resize</p></li>
<li><p>crop</p></li>
</ul>
</div></blockquote>
</div></blockquote>
<hr class="docutils" />
<ul class="simple">
<li><p><a href="#id89"><span class="problematic" id="id90">**</span></a>:param**✨ <cite>photo_id:</cite> <cite>int:</cite> Get the photo id from the url</p></li>
<li><p><a href="#id91"><span class="problematic" id="id92">**</span></a>:param**✨ <cite>body:</cite> <cite>TransformBodyModel:</cite> Get the data from the request body</p></li>
<li><p><a href="#id93"><span class="problematic" id="id94">**</span></a>:param**✨ <cite>current_user:</cite> <cite>User:</cite> Get the current user from the database</p></li>
<li><p><a href="#id95"><span class="problematic" id="id96">**</span></a>:param**✨ <cite>db:</cite> <cite>Session:</cite> Get access to the database</p></li>
<li><p><a href="#id97"><span class="problematic" id="id98">**</span></a>:param**✨ : Get the id of the photo that you want to transform</p></li>
</ul>
<p><strong>:return:</strong> A dictionary with the keys: <cite>id</cite>, <cite>image_transform</cite> and detail</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.routes.photos.update_user_photo">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.photos.</span></span><span class="sig-name descname"><span class="pre">update_user_photo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">photo_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">updated_photo</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PhotoUpdate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_current_user)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.photos.update_user_photo" title="Link to this definition">¶</a></dt>
<dd><p><strong>Update a user’s photo description🦉</strong></p>
<hr class="docutils" />
<ul class="simple">
<li><p><a href="#id99"><span class="problematic" id="id100">**</span></a>:param**⚯ <cite>photo_id</cite>: int: ID of the photo to update.</p></li>
<li><p><a href="#id101"><span class="problematic" id="id102">**</span></a>:param**⚯ <cite>updated_photo</cite>: PhotoUpdate: Data for updating the photo.</p></li>
<li><p><a href="#id103"><span class="problematic" id="id104">**</span></a>:param**⚯ <cite>current_user</cite>: User: The currently authenticated user.</p></li>
<li><p><a href="#id105"><span class="problematic" id="id106">**</span></a>:param**⚯ <cite>db</cite>: Session: The database session.</p></li>
</ul>
<p><strong>:return:</strong> PhotoResponse: The updated photo response.</p>
</dd></dl>

</section>
<section id="module-src.routes.tags">
<span id="rest-api-routes-tags"></span><h1>REST API routes Tags<a class="headerlink" href="#module-src.routes.tags" title="Link to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="src.routes.tags.create_tag">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.tags.</span></span><span class="sig-name descname"><span class="pre">create_tag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TagBase</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_current_user)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.tags.create_tag" title="Link to this definition">¶</a></dt>
<dd><p>The <cite>create_tag function</cite> creates a new tag in the database.</p>
<p><strong>The function takes a `TagBase` object as input, which is validated by pydantic.
If the validation fails, an error message will be returned to the user.
If it succeeds, then we create a new `Tag` object and add it to our database session (`db`).🐉</strong></p>
<p>___</p>
<ul class="simple">
<li><p><a href="#id107"><span class="problematic" id="id108">**</span></a>:param**🗡 <cite>body</cite>: _TagBase_: Define the type of data that will be passed to the function</p></li>
<li><p><a href="#id109"><span class="problematic" id="id110">**</span></a>:param**🗡 <cite>db</cite>: _Session_: Pass the database connection to the repository layer</p></li>
<li><p><a href="#id111"><span class="problematic" id="id112">**</span></a>:param**🗡 <cite>current_user</cite>: _User_: Get the user who is currently logged in</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The created tag</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.routes.tags.read_all_tags">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.tags.</span></span><span class="sig-name descname"><span class="pre">read_all_tags</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">skip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_current_user)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.tags.read_all_tags" title="Link to this definition">¶</a></dt>
<dd><p>The <cite>read_all_tags function</cite> returns a list of all tags in the database.</p>
<p><strong>The function takes two optional parameters: _skip_ and _limit_, which are used to paginate the results.
If no parameters are provided, then it will return up to 100 tags starting from the first tag.🐍</strong></p>
<p>___</p>
<ul class="simple">
<li><p><a href="#id113"><span class="problematic" id="id114">**</span></a>:param**⚯ <cite>skip</cite>: _int_: Skip the first n tags in the database.|n</p></li>
<li><p><a href="#id115"><span class="problematic" id="id116">**</span></a>:param**⚯ <cite>limit</cite>: _int_: Limit the number of tags returned.</p></li>
<li><p><a href="#id117"><span class="problematic" id="id118">**</span></a>:param**⚯ <cite>db</cite>: _Session_: Get the database session.</p></li>
<li><p><a href="#id119"><span class="problematic" id="id120">**</span></a>:param**⚯ <cite>current_user</cite>: _User_: Get the user who is currently logged in.</p></li>
</ul>
<p><strong>:return:</strong> A list of tags</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.routes.tags.read_my_tags">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.tags.</span></span><span class="sig-name descname"><span class="pre">read_my_tags</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">skip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_current_user)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.tags.read_my_tags" title="Link to this definition">¶</a></dt>
<dd><p>The <cite>read_my_tags function</cite> returns a list of tags that the current user has created.</p>
<p><strong>The skip and limit parameters are used to paginate through the results.🔮</strong></p>
<p>___</p>
<ul class="simple">
<li><p><a href="#id121"><span class="problematic" id="id122">**</span></a>:param**🧹 <cite>skip</cite>: _int_: Skip the first _n_ tags.</p></li>
<li><p><a href="#id123"><span class="problematic" id="id124">**</span></a>:param**🧹 <cite>limit</cite>: _int_: Limit the number of tags returned.</p></li>
<li><p><a href="#id125"><span class="problematic" id="id126">**</span></a>:param**🧹 <cite>db</cite>: _Session_: Pass the database session to the function.</p></li>
<li><p><a href="#id127"><span class="problematic" id="id128">**</span></a>:param**🧹 <cite>current_user</cite>: _User_: Get the user that is currently logged in.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of tag objects</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.routes.tags.read_tag_by_id">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.tags.</span></span><span class="sig-name descname"><span class="pre">read_tag_by_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_current_user)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.tags.read_tag_by_id" title="Link to this definition">¶</a></dt>
<dd><p>The <cite>read_tag_by_id function</cite> returns a single tag by its id.</p>
<p>The function takes in the following parameters:</p>
<ul class="simple">
<li><p><cite>tag_id: int</cite>, the id of the tag to be returned.</p></li>
<li><p><cite>db: Session = Depends(get_db)</cite>, an instance of a database session object that is used for querying and updating data in our database. This parameter is optional because it has a default value (<cite>Depends(get_db)</cite>) which will be used if no other value is provided when calling this function.</p></li>
<li><p><cite>current_user: User = Depends(auth_service.get_current_user)</cite>, an instance🐺</p></li>
</ul>
<p>___</p>
<ul class="simple">
<li><p><a href="#id129"><span class="problematic" id="id130">**</span></a>:param**✨ <cite>tag_id</cite>: _int_: Specify the id of the tag that we want to retrieve from our database.</p></li>
<li><p><a href="#id131"><span class="problematic" id="id132">**</span></a>:param**✨ <cite>db</cite>: _Session_: Pass the database session to the function.</p></li>
<li><p><a href="#id133"><span class="problematic" id="id134">**</span></a>:param**✨ <cite>current_user</cite>: _User_: Check if the user is authenticated.</p></li>
</ul>
<p><strong>:return:</strong> A tag object</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.routes.tags.remove_tag">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.tags.</span></span><span class="sig-name descname"><span class="pre">remove_tag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_current_user)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.tags.remove_tag" title="Link to this definition">¶</a></dt>
<dd><p><strong>The `remove_tag function` removes a tag from the database.</strong>
<strong>Args:</strong>
<cite>tag_id</cite> (_int_): The id of the tag to be removed.
<cite>db</cite> (_Session_, optional): A database session object used for querying and updating data in the database. Defaults to <cite>Depends(get_db)</cite>.
<cite>current_user</cite> (_User_, optional): The user currently logged into this application’s API endpoint. Defaults to <cite>Depends(auth_service.get_current_user)</cite>.🕰️</p>
<p>___</p>
<ul class="simple">
<li><p><a href="#id135"><span class="problematic" id="id136">**</span></a>:param**☍ <cite>tag_id</cite>: _int_: Specify the id of the tag to be removed.</p></li>
<li><p><a href="#id137"><span class="problematic" id="id138">**</span></a>:param**☍ <cite>db</cite>: _Session_: Pass the database session to the function.</p></li>
<li><p><a href="#id139"><span class="problematic" id="id140">**</span></a>:param**☍ <cite>current_user</cite>: _User_: Get the current user’s id.</p></li>
</ul>
<p><strong>:return:</strong> The tag that was removed</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.routes.tags.update_tag">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.tags.</span></span><span class="sig-name descname"><span class="pre">update_tag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TagBase</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_current_user)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.tags.update_tag" title="Link to this definition">¶</a></dt>
<dd><p><strong>The `update_tag function` updates a tag in the database.</strong>
<strong>The function takes three arguments:</strong>
- <cite>body</cite>: A TagBase object containing the new values for the tag.
- <cite>tag_id</cite>: An integer representing the id of an existing hashtag to be updated.
- <cite>db</cite> (optional): A Session object used to connect to and query a database, defaults to None if not provided by caller.
If no session is provided, one will be created using get_db().🐀</p>
<p>___</p>
<ul class="simple">
<li><p><strong>:param</strong> ϟ <cite>body</cite>: _TagBase_: Pass the data from the request body to the function.</p></li>
<li><p><strong>:param</strong> ϟ <cite>tag_id</cite>: _int_: Identify the tag to be updated.</p></li>
<li><p><strong>:param</strong> ϟ <cite>db</cite>: _Session_: Pass the database session to the <cite>repository_tags</cite>.</p></li>
<li><p><strong>:param</strong> ϟ <cite>current_user</cite>: _User_: Check if the user is logged in.</p></li>
</ul>
<p><strong>:return:</strong>  A tag object</p>
</dd></dl>

</section>
<section id="module-src.routes.users">
<span id="rest-api-routes-users"></span><h1>REST API routes Users<a class="headerlink" href="#module-src.routes.users" title="Link to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="src.routes.users.edit_user_profile">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.users.</span></span><span class="sig-name descname"><span class="pre">edit_user_profile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_update</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UserUpdate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UserDb</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_current_user)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.users.edit_user_profile" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt><a href="#id141"><span class="problematic" id="id142">**</span></a>The <cite>edit_user_profile</cite> function allows the user to change their email, username and password.</dt><dd><p>The function takes in a UserUpdate object which contains the new values for each of these fields.
If any of these fields are not provided, they will remain unchanged.🐍**</p>
</dd>
</dl>
<ul class="simple">
<li><p><a href="#id143"><span class="problematic" id="id144">**</span></a>:param**✉ <cite>user_update:</cite> <cite>UserUpdate:</cite> Get the data that the user wants to change</p></li>
<li><p><a href="#id145"><span class="problematic" id="id146">**</span></a>:param**✉ <cite>current_user:</cite> <cite>UserDb:</cite> Get the user who is currently logged in</p></li>
<li><p><a href="#id147"><span class="problematic" id="id148">**</span></a>:param**✉ <cite>db:</cite> <cite>Session:</cite> Access the database</p></li>
<li><p><a href="#id149"><span class="problematic" id="id150">**</span></a>:param**✉ : Get the current user from the database</p></li>
</ul>
<p><a href="#id151"><span class="problematic" id="id152">**</span></a>:return:<a href="#id153"><span class="problematic" id="id154">**</span></a>✉ A dictionary with the message key and the data changed successfully value</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.routes.users.get_user_photos_count">
<span class="sig-prename descclassname"><span class="pre">src.routes.users.</span></span><span class="sig-name descname"><span class="pre">get_user_photos_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#src.routes.users.get_user_photos_count" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt><a href="#id155"><span class="problematic" id="id156">**</span></a>The <cite>get_user_photos_count</cite> function returns the number of photos for a given user.</dt><dd><dl class="simple">
<dt><strong>Args:</strong></dt><dd><p><cite>user_id (int):</cite> The id of the user to get photos count for.
<cite>db (Session):</cite> A database session object. 🏰**</p>
</dd>
</dl>
</dd>
</dl>
<ul class="simple">
<li><p><a href="#id157"><span class="problematic" id="id158">**</span></a>:param**🧹 <cite>user_id:</cite> <cite>int:</cite> Specify the user whose photos we want to count</p></li>
<li><p><a href="#id159"><span class="problematic" id="id160">**</span></a>:param**🧹 <cite>db:</cite> <cite>Session:</cite> Get access to the database</p></li>
</ul>
<p><strong>:return:</strong> The number of photos for a user</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.routes.users.patch_user_profile">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.users.</span></span><span class="sig-name descname"><span class="pre">patch_user_profile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_update</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AdminUserPatch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UserDb</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_current_user)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.users.patch_user_profile" title="Link to this definition">¶</a></dt>
<dd><p><strong>The patch_user_profile function allows you to change the user’s profile information.🔮</strong></p>
<ul class="simple">
<li><p><a href="#id161"><span class="problematic" id="id162">**</span></a>:param**✉ <cite>user_id:</cite> <cite>int:</cite> Get the user id from the path</p></li>
<li><p><a href="#id163"><span class="problematic" id="id164">**</span></a>:param**✉ <cite>user_update:</cite> AdminUserPatch: Pass the data that the user wants to change</p></li>
<li><p><a href="#id165"><span class="problematic" id="id166">**</span></a>:param**✉ <cite>current_user:</cite> UserDb: Get the current user</p></li>
<li><p><a href="#id167"><span class="problematic" id="id168">**</span></a>:param**✉ <cite>db:</cite> <cite>Session:</cite> Pass the database session to the function</p></li>
<li><p><a href="#id169"><span class="problematic" id="id170">**</span></a>:param**✉ : Get the user id</p></li>
</ul>
<p><a href="#id171"><span class="problematic" id="id172">**</span></a>:return:<a href="#id173"><span class="problematic" id="id174">**</span></a>✉ A dictionary with a message</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.routes.users.read_users_me">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.routes.users.</span></span><span class="sig-name descname"><span class="pre">read_users_me</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UserDb</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_current_user)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.routes.users.read_users_me" title="Link to this definition">¶</a></dt>
<dd><p><strong>The `read_users_me` function returns the current user’s information.🔮</strong></p>
<ul class="simple">
<li><p><a href="#id175"><span class="problematic" id="id176">**</span></a>:param**🪄 <cite>current_user:</cite> <cite>UserDb:</cite> Get the current user from the database</p></li>
<li><p><a href="#id177"><span class="problematic" id="id178">**</span></a>:param**🪄 <cite>db:</cite> <cite>Session:</cite> Access the database</p></li>
<li><p><a href="#id179"><span class="problematic" id="id180">**</span></a>:param**🪄 : Get the current user from the database</p></li>
</ul>
<p><strong>:return:</strong> A userdb object</p>
</dd></dl>

</section>
<section id="module-src.services.auth">
<span id="rest-api-services-auth"></span><h1>REST API services Auth<a class="headerlink" href="#module-src.services.auth" title="Link to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="src.services.auth.Auth">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.services.auth.</span></span><span class="sig-name descname"><span class="pre">Auth</span></span><a class="headerlink" href="#src.services.auth.Auth" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="src.services.auth.Auth.ALGORITHM">
<span class="sig-name descname"><span class="pre">ALGORITHM</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'HS256'</span></em><a class="headerlink" href="#src.services.auth.Auth.ALGORITHM" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.services.auth.Auth.SECRET_KEY">
<span class="sig-name descname"><span class="pre">SECRET_KEY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'secret_key'</span></em><a class="headerlink" href="#src.services.auth.Auth.SECRET_KEY" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.services.auth.Auth.create_access_token">
<span class="sig-name descname"><span class="pre">create_access_token</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expires_delta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.services.auth.Auth.create_access_token" title="Link to this definition">¶</a></dt>
<dd><p>The create_access_token function creates a JWT token with the given payload.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self</strong> – Represent the instance of the class</p></li>
<li><p><strong>data</strong> – dict: Store the data that will be encoded in the jwt</p></li>
<li><p><strong>expires_delta</strong> – Optional[float]: Set the expiration time for the token</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An encoded jwt</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.services.auth.Auth.get_current_user">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_current_user</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(OAuth2PasswordBearer)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.services.auth.Auth.get_current_user" title="Link to this definition">¶</a></dt>
<dd><p>The get_current_user function is a dependency that will be used in the UserRouter class.
It takes a token as an argument and returns the user object associated with that token.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self</strong> – Represent the instance of a class</p></li>
<li><p><strong>token</strong> – str: Pass the jwt token to the function</p></li>
<li><p><strong>db</strong> – Session: Access the database</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.services.auth.Auth.get_password_hash">
<span class="sig-name descname"><span class="pre">get_password_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.services.auth.Auth.get_password_hash" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>The get_password_hash function takes a password as an argument and returns the hash of that password.</dt><dd><p>The function uses the pwd_context object to generate a hash from the given password.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self</strong> – Represent the instance of the class</p></li>
<li><p><strong>password</strong> – str: Pass in the password that is being hashed</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A hash of the password</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.services.auth.Auth.oauth2_scheme">
<span class="sig-name descname"><span class="pre">oauth2_scheme</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;fastapi.security.oauth2.OAuth2PasswordBearer</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#src.services.auth.Auth.oauth2_scheme" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.services.auth.Auth.pwd_context">
<span class="sig-name descname"><span class="pre">pwd_context</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;CryptContext&gt;</span></em><a class="headerlink" href="#src.services.auth.Auth.pwd_context" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.services.auth.Auth.verify_password">
<span class="sig-name descname"><span class="pre">verify_password</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plain_password</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hashed_password</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.services.auth.Auth.verify_password" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>The verify_password function takes a plain-text password and the hashed version of that password,</dt><dd><p>and returns True if they match, False otherwise.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self</strong> – Make the method work for a specific instance of the class</p></li>
<li><p><strong>plain_password</strong> – Pass in the plain text password that is entered by the user</p></li>
<li><p><strong>hashed_password</strong> – Verify the password</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A boolean value</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-src.services.photos">
<span id="rest-api-services-photos"></span><h1>REST API services Photos<a class="headerlink" href="#module-src.services.photos" title="Link to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="src.services.photos.create_link_transform_image">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.services.photos.</span></span><span class="sig-name descname"><span class="pre">create_link_transform_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">photo_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#src.services.photos.create_link_transform_image" title="Link to this definition">¶</a></dt>
<dd><p>The create_link_transform_image function takes in a photo_id, user and db as parameters.
It then initializes the cloudinary library. It then queries the database for a photo with 
the given id and user_id. If it finds one, it creates a QR code from that image’s transform url 
and uploads it to Cloudinary using its public id + ‘_qr’ as its name (e.g., if the public id is &amp;quot;abc&amp;quot;, 
then this function will upload an image named &amp;quot;abc_qr&amp;quot;). The function returns None if no such photo exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>photo_id</strong> – int: Specify the photo that you want to transform</p></li>
<li><p><strong>user</strong> – User: Get the user id of the user who is logged in</p></li>
<li><p><strong>db</strong> – Session: Access the database</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary with the image_transform and qr_transform keys</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.services.photos.transform_image">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.services.photos.</span></span><span class="sig-name descname"><span class="pre">transform_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">photo_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TransformBodyModel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">User</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Photo</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#src.services.photos.transform_image" title="Link to this definition">¶</a></dt>
<dd><p>The transform_image function takes in a photo_id, body, user and db.
It then initializes the cloudinary library. It queries the database for a photo with that id and user_id.
If it finds one it creates an empty list called transformation to store all of our transformations in as dictionaries. 
Then we check if each filter is being used by checking if its use_filter attribute is True or False (True meaning that we want to apply this filter). If so, we append the appropriate dictionary into our transformation list using either a single line or multiple lines depending on how many filters are being applied at once.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>photo_id</strong> – int: Identify the photo that is to be transformed</p></li>
<li><p><strong>body</strong> – TransformBodyModel: Get the data from the request body</p></li>
<li><p><strong>user</strong> – User: Check if the user is logged in and has access to the photo</p></li>
<li><p><strong>db</strong> – Session: Query the database for a photo with the id and user_id specified in the function</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The image_transform url</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-src.services.roles">
<span id="rest-api-services-roles"></span><h1>REST API services Roles<a class="headerlink" href="#module-src.services.roles" title="Link to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="src.services.roles.RoleChecker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.services.roles.</span></span><span class="sig-name descname"><span class="pre">RoleChecker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">allowed_roles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Role</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.services.roles.RoleChecker" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

</section>
<section id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Link to this heading">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="#">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Welcome to Photoshare REST Api’s documentation!</a></li>
<li><a class="reference internal" href="#module-main">REST API main</a><ul>
<li><a class="reference internal" href="#main.healthchecker"><code class="docutils literal notranslate"><span class="pre">healthchecker()</span></code></a></li>
<li><a class="reference internal" href="#main.read_items"><code class="docutils literal notranslate"><span class="pre">read_items()</span></code></a></li>
<li><a class="reference internal" href="#main.read_root"><code class="docutils literal notranslate"><span class="pre">read_root()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-src.repository.comments">REST API repository Comments</a><ul>
<li><a class="reference internal" href="#src.repository.comments.create_comment"><code class="docutils literal notranslate"><span class="pre">create_comment()</span></code></a></li>
<li><a class="reference internal" href="#src.repository.comments.delete_comment"><code class="docutils literal notranslate"><span class="pre">delete_comment()</span></code></a></li>
<li><a class="reference internal" href="#src.repository.comments.edit_comment"><code class="docutils literal notranslate"><span class="pre">edit_comment()</span></code></a></li>
<li><a class="reference internal" href="#src.repository.comments.show_single_comment"><code class="docutils literal notranslate"><span class="pre">show_single_comment()</span></code></a></li>
<li><a class="reference internal" href="#src.repository.comments.show_user_comments"><code class="docutils literal notranslate"><span class="pre">show_user_comments()</span></code></a></li>
<li><a class="reference internal" href="#src.repository.comments.show_user_comments_photo"><code class="docutils literal notranslate"><span class="pre">show_user_comments_photo()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-src.repository.photos">REST API repository Photos</a><ul>
<li><a class="reference internal" href="#src.repository.photos.create_user_photo"><code class="docutils literal notranslate"><span class="pre">create_user_photo()</span></code></a></li>
<li><a class="reference internal" href="#src.repository.photos.delete_user_photo"><code class="docutils literal notranslate"><span class="pre">delete_user_photo()</span></code></a></li>
<li><a class="reference internal" href="#src.repository.photos.get_public_id_from_image_url"><code class="docutils literal notranslate"><span class="pre">get_public_id_from_image_url()</span></code></a></li>
<li><a class="reference internal" href="#src.repository.photos.get_user_photo_by_id"><code class="docutils literal notranslate"><span class="pre">get_user_photo_by_id()</span></code></a></li>
<li><a class="reference internal" href="#src.repository.photos.get_user_photos"><code class="docutils literal notranslate"><span class="pre">get_user_photos()</span></code></a></li>
<li><a class="reference internal" href="#src.repository.photos.init_cloudinary"><code class="docutils literal notranslate"><span class="pre">init_cloudinary()</span></code></a></li>
<li><a class="reference internal" href="#src.repository.photos.update_user_photo"><code class="docutils literal notranslate"><span class="pre">update_user_photo()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-src.repository.tags">REST API repository Tags</a><ul>
<li><a class="reference internal" href="#src.repository.tags.create_tag"><code class="docutils literal notranslate"><span class="pre">create_tag()</span></code></a></li>
<li><a class="reference internal" href="#src.repository.tags.get_all_tags"><code class="docutils literal notranslate"><span class="pre">get_all_tags()</span></code></a></li>
<li><a class="reference internal" href="#src.repository.tags.get_my_tags"><code class="docutils literal notranslate"><span class="pre">get_my_tags()</span></code></a></li>
<li><a class="reference internal" href="#src.repository.tags.get_tag_by_id"><code class="docutils literal notranslate"><span class="pre">get_tag_by_id()</span></code></a></li>
<li><a class="reference internal" href="#src.repository.tags.remove_tag"><code class="docutils literal notranslate"><span class="pre">remove_tag()</span></code></a></li>
<li><a class="reference internal" href="#src.repository.tags.update_tag"><code class="docutils literal notranslate"><span class="pre">update_tag()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-src.repository.users">REST API repository Users</a><ul>
<li><a class="reference internal" href="#src.repository.users.create_user"><code class="docutils literal notranslate"><span class="pre">create_user()</span></code></a></li>
<li><a class="reference internal" href="#src.repository.users.get_user_by_email"><code class="docutils literal notranslate"><span class="pre">get_user_by_email()</span></code></a></li>
<li><a class="reference internal" href="#src.repository.users.get_user_by_id"><code class="docutils literal notranslate"><span class="pre">get_user_by_id()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-src.routes.auth">REST API routes Auth</a><ul>
<li><a class="reference internal" href="#src.routes.auth.login"><code class="docutils literal notranslate"><span class="pre">login()</span></code></a></li>
<li><a class="reference internal" href="#src.routes.auth.signup"><code class="docutils literal notranslate"><span class="pre">signup()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-src.routes.comments">REST API routes Comments</a><ul>
<li><a class="reference internal" href="#src.routes.comments.by_user_comments"><code class="docutils literal notranslate"><span class="pre">by_user_comments()</span></code></a></li>
<li><a class="reference internal" href="#src.routes.comments.by_user_photo_comments"><code class="docutils literal notranslate"><span class="pre">by_user_photo_comments()</span></code></a></li>
<li><a class="reference internal" href="#src.routes.comments.create_comment"><code class="docutils literal notranslate"><span class="pre">create_comment()</span></code></a></li>
<li><a class="reference internal" href="#src.routes.comments.delete_comment"><code class="docutils literal notranslate"><span class="pre">delete_comment()</span></code></a></li>
<li><a class="reference internal" href="#src.routes.comments.edit_comment"><code class="docutils literal notranslate"><span class="pre">edit_comment()</span></code></a></li>
<li><a class="reference internal" href="#src.routes.comments.single_comment"><code class="docutils literal notranslate"><span class="pre">single_comment()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-src.routes.photos">REST API routes Photos</a><ul>
<li><a class="reference internal" href="#src.routes.photos.create_link_for_image_transformation"><code class="docutils literal notranslate"><span class="pre">create_link_for_image_transformation()</span></code></a></li>
<li><a class="reference internal" href="#src.routes.photos.create_user_photo"><code class="docutils literal notranslate"><span class="pre">create_user_photo()</span></code></a></li>
<li><a class="reference internal" href="#src.routes.photos.delete_user_photo"><code class="docutils literal notranslate"><span class="pre">delete_user_photo()</span></code></a></li>
<li><a class="reference internal" href="#src.routes.photos.get_user_photo_by_id"><code class="docutils literal notranslate"><span class="pre">get_user_photo_by_id()</span></code></a></li>
<li><a class="reference internal" href="#src.routes.photos.get_user_photos"><code class="docutils literal notranslate"><span class="pre">get_user_photos()</span></code></a></li>
<li><a class="reference internal" href="#src.routes.photos.photo_transformation"><code class="docutils literal notranslate"><span class="pre">photo_transformation()</span></code></a></li>
<li><a class="reference internal" href="#src.routes.photos.update_user_photo"><code class="docutils literal notranslate"><span class="pre">update_user_photo()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-src.routes.tags">REST API routes Tags</a><ul>
<li><a class="reference internal" href="#src.routes.tags.create_tag"><code class="docutils literal notranslate"><span class="pre">create_tag()</span></code></a></li>
<li><a class="reference internal" href="#src.routes.tags.read_all_tags"><code class="docutils literal notranslate"><span class="pre">read_all_tags()</span></code></a></li>
<li><a class="reference internal" href="#src.routes.tags.read_my_tags"><code class="docutils literal notranslate"><span class="pre">read_my_tags()</span></code></a></li>
<li><a class="reference internal" href="#src.routes.tags.read_tag_by_id"><code class="docutils literal notranslate"><span class="pre">read_tag_by_id()</span></code></a></li>
<li><a class="reference internal" href="#src.routes.tags.remove_tag"><code class="docutils literal notranslate"><span class="pre">remove_tag()</span></code></a></li>
<li><a class="reference internal" href="#src.routes.tags.update_tag"><code class="docutils literal notranslate"><span class="pre">update_tag()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-src.routes.users">REST API routes Users</a><ul>
<li><a class="reference internal" href="#src.routes.users.edit_user_profile"><code class="docutils literal notranslate"><span class="pre">edit_user_profile()</span></code></a></li>
<li><a class="reference internal" href="#src.routes.users.get_user_photos_count"><code class="docutils literal notranslate"><span class="pre">get_user_photos_count()</span></code></a></li>
<li><a class="reference internal" href="#src.routes.users.patch_user_profile"><code class="docutils literal notranslate"><span class="pre">patch_user_profile()</span></code></a></li>
<li><a class="reference internal" href="#src.routes.users.read_users_me"><code class="docutils literal notranslate"><span class="pre">read_users_me()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-src.services.auth">REST API services Auth</a><ul>
<li><a class="reference internal" href="#src.services.auth.Auth"><code class="docutils literal notranslate"><span class="pre">Auth</span></code></a><ul>
<li><a class="reference internal" href="#src.services.auth.Auth.ALGORITHM"><code class="docutils literal notranslate"><span class="pre">Auth.ALGORITHM</span></code></a></li>
<li><a class="reference internal" href="#src.services.auth.Auth.SECRET_KEY"><code class="docutils literal notranslate"><span class="pre">Auth.SECRET_KEY</span></code></a></li>
<li><a class="reference internal" href="#src.services.auth.Auth.create_access_token"><code class="docutils literal notranslate"><span class="pre">Auth.create_access_token()</span></code></a></li>
<li><a class="reference internal" href="#src.services.auth.Auth.get_current_user"><code class="docutils literal notranslate"><span class="pre">Auth.get_current_user()</span></code></a></li>
<li><a class="reference internal" href="#src.services.auth.Auth.get_password_hash"><code class="docutils literal notranslate"><span class="pre">Auth.get_password_hash()</span></code></a></li>
<li><a class="reference internal" href="#src.services.auth.Auth.oauth2_scheme"><code class="docutils literal notranslate"><span class="pre">Auth.oauth2_scheme</span></code></a></li>
<li><a class="reference internal" href="#src.services.auth.Auth.pwd_context"><code class="docutils literal notranslate"><span class="pre">Auth.pwd_context</span></code></a></li>
<li><a class="reference internal" href="#src.services.auth.Auth.verify_password"><code class="docutils literal notranslate"><span class="pre">Auth.verify_password()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-src.services.photos">REST API services Photos</a><ul>
<li><a class="reference internal" href="#src.services.photos.create_link_transform_image"><code class="docutils literal notranslate"><span class="pre">create_link_transform_image()</span></code></a></li>
<li><a class="reference internal" href="#src.services.photos.transform_image"><code class="docutils literal notranslate"><span class="pre">transform_image()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-src.services.roles">REST API services Roles</a><ul>
<li><a class="reference internal" href="#src.services.roles.RoleChecker"><code class="docutils literal notranslate"><span class="pre">RoleChecker</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">Photoshare REST Api 0.0.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Welcome to Photoshare REST Api’s documentation!</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2023, Nagini team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>